(this["webpackJsonpmood-tracker-client"]=this["webpackJsonpmood-tracker-client"]||[]).push([[0],{128:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(13),l=n.n(c),u=n(5),i=n(8),o=n(7),s=n(73),m=n.n(s),d="#FBFBDA",f="#33312F",b="#DB5A42";function p(){var e=Object(i.a)(["\n          color: ",";\n          margin-bottom: 0.1em;\n          font-size: 5em;\n          margin-top: 0.5rem;\n        "]);return p=function(){return e},e}function g(){var e=Object(i.a)(["\n        border-bottom: 8px solid ",";\n      "]);return g=function(){return e},e}function h(){return r.a.createElement("header",{className:Object(o.a)(g(),f)},r.a.createElement("h1",{className:Object(o.a)(p(),f)},"Temper"))}var v=n(46),E=n.n(v),O=E()(),j=E.a.rest("https://intense-wildwood-87360.herokuapp.com");O.configure(j.fetch(window.fetch)),O.configure(E.a.authentication({storage:window.localStorage}));var y=O,w=n(12);function x(){var e=Object(i.a)(["\n              text-align: center;\n            "]);return x=function(){return e},e}function S(){var e=Object(i.a)(["\n            min-width: 40%;\n            margin-top: 3em;\n          "]);return S=function(){return e},e}function C(){var e=Object(i.a)(["\n          label {\n            font-size: 2em;\n          }\n          input {\n            display: block;\n            width: 100%;\n            height: 2em;\n            background-color: "," !important;\n            margin: 1em 0;\n          }\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          margin: auto;\n        "]);return C=function(){return e},e}var k=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],l=n[1],i=Object(a.useState)(""),s=Object(u.a)(i,2),m=s[0],f=s[1],b=Object(a.useState)(),p=Object(u.a)(b,2),g=p[0],h=p[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:Object(o.a)(C(),d)},r.a.createElement("div",{className:Object(o.a)(S())},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",id:"username",name:"username",value:c,onChange:function(e){return l(e.target.value)}}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",value:m,onChange:function(e){return f(e.target.value)}}),r.a.createElement("div",{className:Object(o.a)(x())},r.a.createElement("button",{onClick:function(e){return function(e){e.preventDefault();var t={username:c,password:m},n=t.username,a=t.password;return console.log(n),console.log(a),y.authenticate({strategy:"local",username:n,password:a}).catch((function(e){return h(e.message)}))}(e)}},"Log In"),r.a.createElement("span",null,"or ",r.a.createElement(w.a,{to:"/sign-up"},"Sign Up"))),void 0===g?null:r.a.createElement("p",null,g))))};function N(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null),r.a.createElement(k,{setLogin:e.setLogin}))}var F=n(4),z=n.n(F),D=n(20),L=n(10),T=n(62),A=n(78),B=n.n(A),H=(n(95),n(139));var R=function(e){return r.a.createElement("div",null,e.triggersList.map((function(t,n){return r.a.createElement("span",{key:n},t,r.a.createElement("button",{onClick:function(n){return e.removeTrigger(n,t)}},"X"))})))};function I(e){var t=[];return e.happy||t.push("add a value for happy"),e.calm||t.push("add a value for calm"),t}function _(e,t,n){var a=(n[1]-n[0])/(t[1]-t[0]);return~~((Math.min(t[1],Math.max(t[0],e))-t[0])*a+n[0])}function M(e){var t=Object(a.useRef)(),n=Object(a.useRef)();function c(e,t){n.current.beginPath(),n.current.arc(e,t,5,0,2*Math.PI),n.current.stroke()}function l(){n.current.font="15px Arial",n.current.fillText("Sad",15,t.current.height-5),n.current.fillText("Happy",t.current.width-50,t.current.height-5),n.current.save(),n.current.translate(12,t.current.height-20),n.current.rotate(-.5*Math.PI),n.current.fillText("Anxious",0,0),n.current.fillText("Calm",t.current.height-65,0),n.current.restore()}return Object(a.useEffect)((function(){t.current=document.getElementById("canvas"),n.current=t.current.getContext("2d"),n.current.clearRect(0,0,t.current.width,t.current.height),l();var a,r=!1;function u(e,t){var n=e.current.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}t.current.addEventListener("mousedown",(function(e){r=!0,a=u(t,e),n.current.clearRect(0,0,t.current.width,t.current.height),l(),c(a.x,a.y)})),t.current.addEventListener("mousemove",(function(e){!0===r&&(a=u(t,e),n.current.clearRect(0,0,t.current.width,t.current.height),l(),c(a.x,a.y))})),document.addEventListener("mouseup",(function(n){r&&(r=!1,e.setHappySlider(_(a.x,[0,t.current.width],[0,100]),"happy"),e.setCalmSlider(_(a.y,[0,t.current.height],[100,0]),"calm"))}))}),[e]),Object(a.useEffect)((function(){if(e.initialHappy&&e.initialCalm){var a=_(e.initialHappy,[0,100],[0,t.current.width]),r=_(e.initialCalm,[0,100],[t.current.height,0]);console.log(a+", "+r),n.current.clearRect(0,0,t.current.width,t.current.height),l(),c(a,r)}}),[e.initialHappy,e.initialCalm]),r.a.createElement("canvas",{id:"canvas",style:{border:"1px solid black"},height:"300",width:"300"})}function P(){var e=Object(i.a)(["\n            text-align: center;\n          "]);return P=function(){return e},e}function $(){var e=Object(i.a)(["\n    display: block;\n    margin: auto;\n    &--withBtn {\n      text-align: center;\n    }\n  "]);return $=function(){return e},e}function q(){var e=Object(i.a)(["\n    margin-top: 1em;\n  "]);return q=function(){return e},e}function U(){var e=Object(i.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    font-size: 1em;\n  "]);return U=function(){return e},e}var X=function(e){var t=Object(a.useState)(),n=Object(u.a)(t,2),c=n[0],l=n[1],i=Object(a.useState)(),s=Object(u.a)(i,2),m=s[0],d=s[1],f=Object(a.useState)(""),b=Object(u.a)(f,2),p=b[0],g=b[1],h=Object(a.useState)([]),v=Object(u.a)(h,2),E=v[0],O=v[1],j=Object(a.useState)(),y=Object(u.a)(j,2),w=y[0],x=y[1],S=Object(a.useState)(),C=Object(u.a)(S,2),k=C[0],N=C[1],F=Object(a.useState)([]),z=Object(u.a)(F,2),D=z[0],L=z[1],T=Object(a.useRef)(),A=Object(a.useRef)(),B=Object(a.useRef)(),_=Object(a.useRef)();function X(){l(""),d(""),O([]),x(""),N(""),L("")}Object(a.useEffect)((function(){T.current=document.getElementById("happy"),A.current=document.getElementById("calm"),B.current=document.getElementById("canvas"),_.current=B.current.getContext("2d")}),[]),Object(a.useEffect)((function(){var t=e.selectedEntry;t&&(l(t.happy),d(t.calm),O(t.triggersList),x(t.sleep),N(t.notes))}),[e]);var J=Object(o.a)(U()),V=Object(o.a)(q()),Y=Object(o.a)($()),G=Y+"--withBtn";return r.a.createElement("form",{className:J},r.a.createElement(M,{setHappySlider:function(e){T.current.value=e,l(e)},setCalmSlider:function(e){A.current.value=e,d(e)},initialHappy:c,initialCalm:m}),r.a.createElement("div",{className:V},r.a.createElement("label",{htmlFor:""},"Sad"),r.a.createElement("input",{id:"happy",name:"happy",type:"range",min:"0",max:"100",value:c||"",onChange:function(e){return l(e.target.value)}}),r.a.createElement("label",{htmlFor:"happy"},"Happy")),r.a.createElement("div",{className:V},r.a.createElement("label",{htmlFor:""},"Anxious"),r.a.createElement("input",{id:"calm",name:"calm",type:"range",min:"0",max:"100",value:m||"",onChange:function(e){return d(e.target.value)}}),r.a.createElement("label",{htmlFor:"calm"},"Calm")),r.a.createElement("div",{className:V},r.a.createElement("label",{htmlFor:"sleep"},"How many hours did you sleep last night?"),r.a.createElement("input",{className:Y,type:"number",name:"sleep",value:w,onChange:function(e){return x(e.target.value)}})),r.a.createElement("div",{className:V},r.a.createElement("label",{htmlFor:"triggers"},"Has anything triggered how you feel?"),r.a.createElement(R,{triggersList:E,removeTrigger:function(e,t){e.preventDefault(),O(E.filter((function(e){return e!==t})))}}),r.a.createElement("div",{className:G},r.a.createElement("input",{id:"triggers",value:p,onChange:function(e){return g(e.target.value)}}),r.a.createElement("button",{onClick:function(e){return function(e){e.preventDefault(),O(E.concat(p)),g("")}(e)}},"Add"))),r.a.createElement("div",{className:Object(o.b)(V,Object(o.a)(P()))},r.a.createElement("label",{htmlFor:"notes"},"Notes"),r.a.createElement("textarea",{className:Y,value:k,onChange:function(e){return N(e.target.value)},name:"notes"})),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(t){t.preventDefault(),e.clearOnSubmit&&X(),e.submit({happy:c,calm:m,sleep:w,triggersList:E,notes:k},I,L)}},"Submit"),e.handleDelete?r.a.createElement("button",{onClick:function(t){t.preventDefault(),e.handleDelete(),X()}},"Delete"):null),H.a(D)?null:D.map((function(e,t){return r.a.createElement("p",{key:t},e)})))};function J(){var e=Object(i.a)(["\n    padding: 0.5em;\n  "]);return J=function(){return e},e}function V(){var e=Object(i.a)(["\n    text-align: right;\n    width: 80%;\n  "]);return V=function(){return e},e}function Y(e){var t=Object(o.a)(V()),n=Object(o.a)(J());return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t},r.a.createElement("button",{className:n,onClick:function(){return e.setShowEntry(!1)}},"X")),r.a.createElement(X,{selectedEntry:e.selectedEntry,submit:function(t,n,a){var r=n(t),c=e.selectedEntry._id;Object(H.a)(r)?(console.log(t),y.service("log").patch(c,t).catch((function(e){return a(e.message)})),e.setShowEntry(!1)):a(r)},handleDelete:function(){y.service("log").remove(e.selectedEntry._id),e.setSelectedEntry(void 0),e.getCalendarEntries(),e.setShowEntry(!1)}}))}function G(){var e=Object(i.a)(["\n    opacity: ",";\n  "]);return G=function(){return e},e}function K(){var e=Object(i.a)(["\n    position: relative;\n  "]);return K=function(){return e},e}function Q(){var e=Object(i.a)(["\n    position: absolute;\n    top: 0;\n    margin: auto;\n    width: 100%;\n  "]);return Q=function(){return e},e}var W=Object(T.b)(B.a);function Z(e){var t=Object(a.useContext)(Se),n=Object(a.useState)([]),c=Object(u.a)(n,2),l=c[0],i=c[1],s=Object(a.useState)(void 0),m=Object(u.a)(s,2),d=m[0],f=m[1],b=Object(a.useState)(!1),p=Object(u.a)(b,2),g=p[0],h=p[1],v=Object(o.a)(Q()),E=Object(o.a)(K()),O=Object(o.a)(G(),!1===g?"100%":"20%"),j=Object(a.useCallback)(Object(L.a)(z.a.mark((function e(){var n,a,r,c;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.login.user._id,a=y.service("log"),console.log(n),e.next=5,a.find({query:{$limit:100,userId:n,$select:["calendarEntry","_id"]}});case 5:r=e.sent,console.log(r),c=r.data.map((function(e){return Object(D.a)(Object(D.a)({},e.calendarEntry),{},{id:e._id})})),i(c);case 9:case"end":return e.stop()}}),e)}))),[i,t.login.user._id]);function w(){return(w=Object(L.a)(z.a.mark((function e(t){var n,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y.service("log"),e.next=3,n.find({query:{_id:t}});case 3:a=e.sent,f(a.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){!function(e){w.apply(this,arguments)}(e),h(!0)}return Object(a.useEffect)((function(){j()}),[j]),r.a.createElement("div",{className:E},r.a.createElement(T.a,{localizer:W,events:l,startAccessor:function(e){return new Date(e.start)},allDayAccessor:"allDay",views:["month"],style:{height:500},onSelectEvent:function(e){return x(e.id)},popup:!0,className:O}),g&&r.a.createElement("div",{className:v},r.a.createElement(Y,{setShowEntry:h,selectedEntry:d,setSelectedEntry:f,getCalendarEntries:j})))}function ee(){var e=Object(i.a)(["\n  display: inline-block;\n  border: none;\n  padding: 0;\n  margin: 0;\n  text-decoration: none;\n  background-color: inherit;\n  font-size: 1.5em;\n  :hover {\n    text-decoration: underline;\n  }\n"]);return ee=function(){return e},e}function te(){var e=Object(i.a)(["\n  &--unselected,\n  &--selected {\n    display: inline-block;\n    a {\n      font-size: 1.5em;\n      text-decoration: none;\n      margin-right: 1em;\n    }\n    a:hover {\n      text-decoration: underline;\n    }\n  }\n  &--unselected {\n    a {\n      color: black;\n    }\n  }\n  &--selected {\n    a {\n      color: ",";\n    }\n  }\n"]);return te=function(){return e},e}function ne(){var e=Object(i.a)(["\n  ul {\n    padding: 0;\n  }\n  div {\n    display: inline-block;\n    width: 50%;\n  }\n  div:nth-of-type(2) {\n    text-align: right;\n  }\n"]);return ne=function(){return e},e}var ae=Object(o.a)(ne()),re=Object(o.a)(te(),b),ce=Object(o.a)(ee()),le=re+"--unselected",ue=re+"--selected";function ie(e){var t=Object(w.e)();return r.a.createElement("nav",{className:ae},r.a.createElement("ul",null,r.a.createElement("div",null,r.a.createElement("li",{className:"/new-entry"===t.pathname?ue:le},r.a.createElement(w.a,{to:"/new-entry"},"New Entry")),r.a.createElement("li",{className:"/dashboard"===t.pathname?ue:le},r.a.createElement(w.a,{to:"/dashboard"},"Dashboard")),r.a.createElement("li",{className:"/visualize"===t.pathname?ue:le},r.a.createElement(w.a,{to:"/visualize"},"Visualize"))),r.a.createElement("div",null,r.a.createElement("li",{className:le},r.a.createElement("button",{className:ce,onClick:function(){y.logout().then(Object(w.d)("/login"))}},"Log Out")))))}function oe(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null),r.a.createElement(ie,null),r.a.createElement(Z,null))}function se(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null),r.a.createElement(ie,null),r.a.createElement(X,{submit:function(e,t,n){var a=t(e);Object(H.a)(a)?(console.log(e),y.service("log").create(e).catch((function(e){return n(e.message)})),Object(w.d)("/dashboard")):n(a)},clearOnSubmit:!0}),";")}var me=n(2),de=n(138);function fe(){var e=Object(i.a)(["\n            text-align: center;\n            font-size: 2em;\n            margin-top: 4em;\n          "]);return fe=function(){return e},e}function be(){var e=Object(i.a)(["\n  width: 100%;\n  height: 20rem;\n  margin-top: 4rem;\n"]);return be=function(){return e},e}var pe=Object(o.a)(be());function ge(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],c=t[1],l=Object(a.useContext)(Se),i=Object(a.useState)("month"),s=Object(u.a)(i,2),m=s[0],d=(s[1],Object(a.useCallback)(Object(L.a)(z.a.mark((function e(){var t,n,a,r,u;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.login.user._id,n=y.service("log"),console.log(t),e.next=5,n.find({query:{$limit:100,$sort:{createdAt:-1},userId:t,$select:["happy","calm","createdAt"]}});case 5:a=e.sent,console.log(a),r=a.data.map((function(e){return{label:"Happy",val:e.happy,date:e.createdAt.split("T")[0]}})),u=a.data.map((function(e){return{label:"Calm",val:e.calm,date:e.createdAt.split("T")[0]}})),c({graph:[].concat(Object(me.a)(r),Object(me.a)(u))});case 10:case"end":return e.stop()}}),e)}))),[l.login.user._id]));return Object(a.useEffect)((function(){d(m)}),[d,m]),r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null),r.a.createElement(ie,null),n&&0===n.graph.length?r.a.createElement("div",{className:Object(o.a)(fe())},r.a.createElement("p",null,"There are no entries to show.")):r.a.createElement("div",{className:pe},n?r.a.createElement(de.a,{spec:{width:"container",height:400,description:"Mood over time",config:{legend:{labelFontSize:20,titleFontSize:20},axis:{labelFontSize:10,titleFontSize:20}},mark:{type:"line",point:!0},encoding:{x:{title:"Date",field:"date",type:"temporal",as:"month"},y:{aggregate:"mean",field:"val",type:"quantitative",title:"Mood"},color:{field:"label",type:"nominal",title:""}},data:{name:"graph"}},data:n,style:{width:"100%"}}):null))}function he(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.c,null,r.a.createElement(w.b,{from:"/login",to:"/",noThrow:!0}),r.a.createElement(w.b,{from:"/",to:"new-entry",noThrow:!0}),r.a.createElement(se,{path:"new-entry"}),r.a.createElement(oe,{path:"dashboard"}),r.a.createElement(ge,{path:"visualize"})))}function ve(){var e=Object(i.a)(["\n              text-align: center;\n            "]);return ve=function(){return e},e}function Ee(){var e=Object(i.a)(["\n            min-width: 40%;\n            margin-top: 1em;\n          "]);return Ee=function(){return e},e}function Oe(){var e=Object(i.a)(["\n          label {\n            font-size: 2em;\n          }\n          input {\n            display: block;\n            width: 100%;\n            height: 2em;\n            background-color: "," !important;\n            margin: 1em 0;\n          }\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          margin: auto;\n          margin-top: 2em;\n        "]);return Oe=function(){return e},e}var je=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],l=n[1],i=Object(a.useState)(""),s=Object(u.a)(i,2),m=s[0],f=s[1],b=Object(a.useState)(),p=Object(u.a)(b,2),g=p[0],h=p[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:Object(o.a)(Oe(),d)},r.a.createElement("div",{className:Object(o.a)(Ee())},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",id:"username",name:"username",value:c,onChange:function(e){return l(e.target.value)}}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",value:m,onChange:function(e){return f(e.target.value)}}),r.a.createElement("div",{className:Object(o.a)(ve())},r.a.createElement("p",null,"Choose a username and password"),r.a.createElement("button",{onClick:function(e){return function(e){e.preventDefault();var t={username:c,password:m},n=t.username,a=t.password;return console.log(n),console.log(a),y.service("users").create({username:n,password:a}).catch((function(e){return h(e.message)}))}(e)}},"Signup ")," ",r.a.createElement("span",null,"back to ",r.a.createElement(w.a,{to:"/login"},"login"))),void 0===g?null:r.a.createElement("p",null,g))))};function ye(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null),r.a.createElement(je,null))}function we(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.c,null,r.a.createElement(w.b,{from:"new-entry",to:"/",noThrow:!0}),r.a.createElement(w.b,{from:"/",to:"login",noThrow:!0}),r.a.createElement(N,{setLogin:e.setLogin,path:"login"}),r.a.createElement(ye,{path:"sign-up"})))}function xe(){var e=Object(i.a)(["\n  ","\n  html {\n    box-sizing: border-box;\n  }\n  *, *:before, *:after {\n    box-sizing: inherit;\n  }\n\n    body {\n      max-width: 960px;\n      margin: auto;\n      font-family: 'Comfortaa', sans-serif;\n      background-color: ","\n    }\n  \n  "]);return xe=function(){return e},e}var Se=Object(a.createContext)({});var Ce=function(){Object(o.c)(xe(),m.a,d);var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){y.authenticate().catch((function(){return c(null)})),y.on("authenticated",(function(e){c({login:e})}))}),[]),y.on("logout",(function(){c(null)})),null==n?r.a.createElement(we,{setLogin:c}):r.a.createElement(Se.Provider,{value:n},r.a.createElement(he,null))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ce,null)),document.getElementById("root"))},83:function(e,t,n){e.exports=n(128)}},[[83,1,2]]]);
//# sourceMappingURL=main.70672db5.chunk.js.map